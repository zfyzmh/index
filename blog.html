<!doctype html>
<html lang="zh-Hans" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">Blog | 子非鱼</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://zfyzmh.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://zfyzmh.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://zfyzmh.github.io/blog"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" property="og:title" content="Blog | 子非鱼"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://zfyzmh.github.io/blog"><link data-rh="true" rel="alternate" href="https://zfyzmh.github.io/blog" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://zfyzmh.github.io/blog" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"Blog","@id":"https://zfyzmh.github.io/blog","mainEntityOfPage":"https://zfyzmh.github.io/blog","headline":"Blog","description":"Blog","blogPost":[{"@type":"BlogPosting","@id":"https://zfyzmh.github.io/blog/五子棋","mainEntityOfPage":"https://zfyzmh.github.io/blog/五子棋","url":"https://zfyzmh.github.io/blog/五子棋","headline":"使用blazor servers 和signalr实现简单的在线五子棋游戏","name":"使用blazor servers 和signalr实现简单的在线五子棋游戏","description":"前些天女朋友邀请我一起玩微信小程序里的某个五子棋游戏,经常进不去房间且广告极多,令人生厌.于是就有了这个练手小项目","datePublished":"2024-04-29T10:42:13.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://zfyzmh.github.io/blog/江南与师姐","mainEntityOfPage":"https://zfyzmh.github.io/blog/江南与师姐","url":"https://zfyzmh.github.io/blog/江南与师姐","headline":"江南与师姐","name":"江南与师姐","description":"江南依旧是我喜欢的作家,如果这段文字触动了你，你可以去看看他的作品","datePublished":"2024-04-29T10:42:13.000Z","author":[],"keywords":[]},{"@type":"BlogPosting","@id":"https://zfyzmh.github.io/blog/welcome","mainEntityOfPage":"https://zfyzmh.github.io/blog/welcome","url":"https://zfyzmh.github.io/blog/welcome","headline":"Welcome","name":"Welcome","description":"Docusaurus blogging features are powered by the blog plugin.","datePublished":"2021-08-26T00:00:00.000Z","author":[{"@type":"Person","name":"Sébastien Lorber","description":"Docusaurus maintainer","url":"https://sebastienlorber.com","image":"https://github.com/slorber.png"},{"@type":"Person","name":"Yangshun Tay","description":"Front End Engineer @ Facebook","url":"https://github.com/yangshun","image":"https://github.com/yangshun.png"}],"keywords":[]},{"@type":"BlogPosting","@id":"https://zfyzmh.github.io/blog/mdx-blog-post","mainEntityOfPage":"https://zfyzmh.github.io/blog/mdx-blog-post","url":"https://zfyzmh.github.io/blog/mdx-blog-post","headline":"MDX Blog Post","name":"MDX Blog Post","description":"Blog posts support Docusaurus Markdown features, such as MDX.","datePublished":"2021-08-01T00:00:00.000Z","author":{"@type":"Person","name":"Sébastien Lorber","description":"Docusaurus maintainer","url":"https://sebastienlorber.com","image":"https://github.com/slorber.png"},"keywords":[]},{"@type":"BlogPosting","@id":"https://zfyzmh.github.io/blog/long-blog-post","mainEntityOfPage":"https://zfyzmh.github.io/blog/long-blog-post","url":"https://zfyzmh.github.io/blog/long-blog-post","headline":"Long Blog Post","name":"Long Blog Post","description":"This is the summary of a very long blog post,","datePublished":"2019-05-29T00:00:00.000Z","author":{"@type":"Person","name":"Endilie Yacop Sucipto","description":"Maintainer of Docusaurus","url":"https://github.com/endiliey","image":"https://github.com/endiliey.png"},"keywords":[]},{"@type":"BlogPosting","@id":"https://zfyzmh.github.io/blog/first-blog-post","mainEntityOfPage":"https://zfyzmh.github.io/blog/first-blog-post","url":"https://zfyzmh.github.io/blog/first-blog-post","headline":"First Blog Post","name":"First Blog Post","description":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet","datePublished":"2019-05-28T00:00:00.000Z","author":{"@type":"Person","name":"Gao Wei","description":"Docusaurus Core Team","url":"https://github.com/wgao19","image":"https://github.com/wgao19.png"},"keywords":[]}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="子非鱼 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="子非鱼 Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ac062432.css">
<script src="/assets/js/runtime~main.cc40bcce.js" defer="defer"></script>
<script src="/assets/js/main.29b6ad48.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/blog"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">子非鱼</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/intro">Document</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/zfyzmh" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/五子棋">使用blazor servers 和signalr实现简单的在线五子棋游戏</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/江南与师姐">江南与师姐</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/welcome">Welcome</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/mdx-blog-post">MDX Blog Post</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/long-blog-post">Long Blog Post</a></li></ul></nav></aside><main class="col col--7"><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/五子棋">使用blazor servers 和signalr实现简单的在线五子棋游戏</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-04-29T10:42:13.000Z">2024年4月29日</time> · <!-- -->阅读需 10 分钟</div></header><div class="markdown"><p>前些天女朋友邀请我一起玩微信小程序里的某个五子棋游戏,经常进不去房间且广告极多,令人生厌.于是就有了这个练手小项目</p>
<p><a href="https://github.com/zfyzmh/BlazorGame" target="_blank" rel="noopener noreferrer">github仓库地址</a></p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/assets/images/image-9540df3106cbcdbcc0d4a878a953b2a2.png" width="1920" height="929" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="借鉴及引用内容">借鉴及引用内容<a href="#借鉴及引用内容" class="hash-link" aria-label="借鉴及引用内容的直接链接" title="借鉴及引用内容的直接链接">​</a></h2>
<p><a href="https://docs.meowv.com/stack/blazor/gomoku-games-based-on-blazor.html" target="_blank" rel="noopener noreferrer">阿星plus博客</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="五子棋单机部分代码实现仓库地址"><a href="https://github.com/ut32/gobang/" target="_blank" rel="noopener noreferrer">五子棋单机部分代码实现仓库地址</a><a href="#五子棋单机部分代码实现仓库地址" class="hash-link" aria-label="五子棋单机部分代码实现仓库地址的直接链接" title="五子棋单机部分代码实现仓库地址的直接链接">​</a></h2>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="坑点">坑点<a href="#坑点" class="hash-link" aria-label="坑点的直接链接" title="坑点的直接链接">​</a></h2>
<ol>
<li>
<p>剪贴板函数必须是https或者本地才可以调用</p>
</li>
<li>
<p>text.json无法解析二维数组,需切换json.net</p>
</li>
<li>
<p>signalr更新数据后无法及时刷新页面 解决方法为 StateHasChanged() 改为 InvokeAsync(StateHasChanged);有点winform中this.invoke那味了</p>
</li>
<li>
<p>appsettings.json中或appsettings.Development.json中需添加&quot;DetailedErrors&quot;: true以显示详细的错误信息,剪切板报错时提示我做的</p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="主要代码">主要代码<a href="#主要代码" class="hash-link" aria-label="主要代码的直接链接" title="主要代码的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="programcs">Program.cs<a href="#programcs" class="hash-link" aria-label="Program.cs的直接链接" title="Program.cs的直接链接">​</a></h3>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using Gobang.GameHub;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.AspNetCore.Components;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.AspNetCore.Components.Web;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using MudBlazor.Services;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace Gobang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public class Program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public static void Main(string[] args)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var builder = WebApplication.CreateBuilder(args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Add services to the container.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            builder.Services.AddSignalR()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .AddNewtonsoftJsonProtocol();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            builder.Services.AddRazorPages();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            builder.Services.AddServerSideBlazor();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            builder.Services.AddMudServices();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            builder.WebHost.UseUrls(&quot;http://*:5005&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var app = builder.Build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Configure the HTTP request pipeline.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (!app.Environment.IsDevelopment())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                app.UseExceptionHandler(&quot;/Error&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            app.UseStaticFiles();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            app.UseRouting();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            app.MapBlazorHub();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            app.MapFallbackToPage(&quot;/_Host&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            app.MapHub&lt;BlazorChatSampleHub&gt;(BlazorChatSampleHub.HubUrl);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            app.MapHub&lt;GoBangHub&gt;(GoBangHub.HubUrl);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            app.Run();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gobanghubcssignalr集线器">GoBangHub.cs(signalr集线器)<a href="#gobanghubcssignalr集线器" class="hash-link" aria-label="GoBangHub.cs(signalr集线器)的直接链接" title="GoBangHub.cs(signalr集线器)的直接链接">​</a></h3>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using Gobang.Model;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.AspNetCore.SignalR;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.Extensions.Caching.Memory;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace Gobang.GameHub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public class GoBangHub : Hub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public const string HubUrl = &quot;/gobang&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private static readonly List&lt;GoBangRoom&gt; goBangRooms = new();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public override Task OnConnectedAsync()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Console.WriteLine($&quot;{Context.ConnectionId} connected&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return base.OnConnectedAsync();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public override async Task OnDisconnectedAsync(Exception? exception)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Console.WriteLine($&quot;Disconnected {exception?.Message} {Context.ConnectionId}&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await base.OnDisconnectedAsync(exception);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// 创建房间(即创建群组)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// &lt;param name=&quot;roomName&quot;&gt;房间名(群组名)&lt;/param&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// &lt;param name=&quot;password&quot;&gt;密码(可选)&lt;/param&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// &lt;returns&gt;&lt;/returns&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public async Task CreateRoom(string roomName, string? password = null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            goBangRooms.Add(new GoBangRoom() { Guid = Guid.NewGuid(), RoomName = roomName, Password = password });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await Groups.AddToGroupAsync(Context.ConnectionId, roomName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// 加入房间(群组)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// &lt;param name=&quot;roomName&quot;&gt;房间名(群组名)&lt;/param&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// &lt;param name=&quot;password&quot;&gt;密码(可选)&lt;/param&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// &lt;returns&gt;&lt;/returns&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public async Task GetIntoRoom(string roomName, string? password = null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var room = goBangRooms.FirstOrDefault(m =&gt; m.RoomName == roomName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (room == null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                await Clients.Caller.SendAsync(&quot;Alert&quot;, &quot;未找到该房间!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (!string.IsNullOrEmpty(room.Password) &amp;&amp; room.Password != password)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    await Clients.Caller.SendAsync(&quot;Alert&quot;, &quot;房间密码错误!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await Groups.AddToGroupAsync(Context.ConnectionId, roomName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// 落子</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// &lt;param name=&quot;room&quot;&gt;房间&lt;/param&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// &lt;param name=&quot;Chess&quot;&gt;棋盘&lt;/param&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        /// &lt;returns&gt;&lt;/returns&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public async Task Playing(GoBangRoom room, int[,] Chess)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            goBangRooms.First(m =&gt; m.RoomName == room.RoomName).Chess = Chess;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await Clients.OthersInGroup(room.RoomName).SendAsync(&quot;SynchronizeCheckerboard&quot;, Chess);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public async Task Win(GoBangRoom room)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await Clients.OthersInGroup(room.RoomName).SendAsync(&quot;Alert&quot;, &quot;\n你个渣渣👎&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gobangrazorcs">Gobang.razor.cs<a href="#gobangrazorcs" class="hash-link" aria-label="Gobang.razor.cs的直接链接" title="Gobang.razor.cs的直接链接">​</a></h3>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@page &quot;/&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@page &quot;/{RoomName}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@inject IJSRuntime JS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">gobang-box</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">Gobang.Shared.Chessboard</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Chess</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Chess</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">OnPlaying</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Playing</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">Gobang.Shared.Chessboard</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">chess-info</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">五子棋⚫⚪</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h1</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @if (!IsInRoom)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">MudButton</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Variant</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Variant.Outlined</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Color</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Color.Primary</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">@onclick</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">CreateRoom</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">创建房间</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">MudButton</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">MudButton</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Variant</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Variant.Outlined</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Color</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Color.Primary</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">@onclick</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">GetIntoRoom</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">加入房间</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">MudButton</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">MudButton</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Variant</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Variant.Outlined</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Color</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Color.Primary</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">@onclick</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">StartGame</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">@(IsInGame ? &quot;重置游戏&quot; : &quot;开始游戏&quot;)</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">MudButton</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">MudButton</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Variant</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Variant.Outlined</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">Color</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Color.Primary</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">@onclick</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Invite</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">邀请朋友</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">MudButton</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">chess-msg</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">b</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">@msgs</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">b</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">第一步,创建房间</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">第二步,点击邀请朋友</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">第三步,等朋友进入网页后点击开始游戏</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">第四步,落子</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">游戏规则：</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">（1）房主始终黑棋先手。</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">（2）点击开始游戏按钮开始对局。</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">（4）对局双方各执一色棋子。</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">（5）空棋盘开局。</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">（6）黑先、白后，交替下子，每次只能下一子。</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">（7）棋子下在棋盘的空白点上，棋子下定后，不得向其它点移动，不得从棋盘上拿掉或拿起另落别处。</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">（8）黑方的第一枚棋子可下在棋盘任意交叉点上。</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">（9）轮流下子是双方的权利，</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">del</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">但允许任何一方放弃下子权（即：PASS权）</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">del</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">。</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">（10）</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">del</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">五子棋对局，执行黑方指定开局、三手可交换、五手两打的规定。整个对局过程中黑方有禁手，白方无禁手。黑方禁手有三三禁手、四四禁手和长连禁手三种。</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">del</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gobangrazorcs-1">Gobang.razor.cs<a href="#gobangrazorcs-1" class="hash-link" aria-label="Gobang.razor.cs的直接链接" title="Gobang.razor.cs的直接链接">​</a></h3>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">using Gobang.GameHub;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Gobang.Model;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.AspNetCore.Components;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.AspNetCore.SignalR.Client;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using Microsoft.JSInterop;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using MudBlazor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace Gobang.Pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public partial class Gobang : IDisposable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Inject] private NavigationManager? NavigationManager { get; set; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Inject]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private ISnackbar Snackbar { get; set; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [Parameter]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public string RoomName { get; set; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private int[,] Chess { get; set; } = new int[19, 19];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private string first = &quot;He&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private bool IsInGame = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private bool IsInRoom = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private GoBangRoom? Room { get; set; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private string msgs;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private int MineChess = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private string? _hubUrl;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private HubConnection? _hubConnection;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protected override async Task OnInitializedAsync()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (_hubConnection == null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                string baseUrl = NavigationManager!.BaseUri;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _hubUrl = baseUrl.TrimEnd(&#x27;/&#x27;) + GoBangHub.HubUrl;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _hubConnection = new HubConnectionBuilder()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .WithUrl(_hubUrl)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .ConfigureLogging(logging =&gt; logging.AddConsole())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .AddNewtonsoftJsonProtocol()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .Build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _hubConnection.On&lt;int[,]&gt;(&quot;SynchronizeCheckerboard&quot;, SynchronizeCheckerboard);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _hubConnection.On&lt;string&gt;(&quot;Alert&quot;, Alert);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                await _hubConnection.StartAsync();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await base.OnInitializedAsync();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protected override async Task OnParametersSetAsync()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (!string.IsNullOrEmpty(RoomName))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                IsInRoom = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                IsInGame = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                MineChess = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Room = new GoBangRoom() { RoomName = RoomName };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                await _hubConnection!.SendAsync(&quot;GetIntoRoom&quot;, RoomName, &quot;&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await base.OnParametersSetAsync();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private async Task Alert(string msg)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await JS.InvokeAsync&lt;string&gt;(&quot;alert&quot;, msg);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (msg == &quot;\n你个渣渣👎&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                IsInGame = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Chess = new int[19, 19];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private async Task CreateRoom()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var roomname = await JS.InvokeAsync&lt;string&gt;(&quot;prompt&quot;, &quot;请输入房间名称!&quot;, &quot;房间&quot; + Guid.NewGuid());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (string.IsNullOrEmpty(roomname)) return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IsInRoom = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MineChess = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (string.IsNullOrEmpty(roomname)) return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await _hubConnection!.SendAsync(&quot;CreateRoom&quot;, roomname, &quot;&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Room = new GoBangRoom() { RoomName = roomname };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private async Task GetIntoRoom()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var roomname = await JS.InvokeAsync&lt;string&gt;(&quot;prompt&quot;, &quot;请输入房间名称!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (string.IsNullOrEmpty(roomname)) return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IsInRoom = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IsInGame = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await _hubConnection!.SendAsync(&quot;GetIntoRoom&quot;, roomname, &quot;&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            MineChess = 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Room = new GoBangRoom() { RoomName = roomname };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private async Task Invite()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Snackbar.Add(&quot;复制链接成功,快去邀请你的朋友吧!🚀&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await JS.InvokeVoidAsync(&quot;copyToClipboard&quot;, NavigationManager.BaseUri + Room!.RoomName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private async Task StartGame()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 初始化棋盘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Chess = new int[19, 19];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IsInGame = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await _hubConnection!.SendAsync(&quot;Playing&quot;, Room, Chess);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private async Task Playing((int, int) value)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            (int row, int cell) = value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var numEqual = Chess.OfType&lt;int&gt;().Count(x =&gt; x == 1) == Chess.OfType&lt;int&gt;().Count(x =&gt; x == 2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (MineChess == 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (!numEqual)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Snackbar.Add(&quot;对方落子时间!🚀&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (numEqual)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    Snackbar.Add(&quot;对方落子时间!🚀&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            //是否开始游戏，当前判断没开始给出提示</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (!IsInGame)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Snackbar.Add(&quot;\n💪点击开始游戏按钮开启对局，请阅读游戏规则💪&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 已落子直接返回，不做任何操作</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (Chess[row, cell] != 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 根据传进来的坐标进行我方落子</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Chess[row, cell] = MineChess;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (IsWin(MineChess, row, cell))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                await JS.InvokeAsync&lt;Task&gt;(&quot;alert&quot;, &quot;\n恭喜，你赢了👍&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                IsInGame = !IsInGame;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                await _hubConnection!.SendAsync(&quot;Win&quot;, Room);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 我方落子之后通知对方落子</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await _hubConnection!.SendAsync(&quot;Playing&quot;, Room, Chess);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            StateHasChanged();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private void SynchronizeCheckerboard(int[,] chess)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Chess = chess;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            InvokeAsync(StateHasChanged);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private bool IsWin(int chess, int row, int cell)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #region 横方向 ➡⬅</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var i = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var score = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var rightValid = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var leftValid = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                while (i &lt;= 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    var right = cell + i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (rightValid &amp;&amp; right &lt; 19)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if (Chess[row, right] == chess)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            score++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            if (score &gt;= 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            rightValid = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    var left = cell - i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (leftValid &amp;&amp; left &gt;= 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if (Chess[row, left] == chess)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            score++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            if (score &gt;= 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            leftValid = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    i++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #endregion 横方向 ➡⬅</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #region 竖方向 ⬇⬆</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var i = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var score = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var topValid = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var bottomValid = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                while (i &lt; 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    var top = row - i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (topValid &amp;&amp; top &gt;= 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if (Chess[top, cell] == chess)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            score++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            if (score &gt;= 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            topValid = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    var bottom = row + i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (bottomValid &amp;&amp; bottom &lt; 19)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if (Chess[bottom, cell] == chess)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            score++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            if (score &gt;= 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            bottomValid = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    i++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #endregion 竖方向 ⬇⬆</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #region 撇方向  ↙↗</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var i = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var score = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var topValid = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var bottomValid = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                while (i &lt; 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    var rightTopRow = row - i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    var rightTopCell = cell + i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (topValid &amp;&amp; rightTopRow &gt;= 0 &amp;&amp; rightTopCell &lt; 19)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if (Chess[rightTopRow, rightTopCell] == chess)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            score++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            if (score &gt;= 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            topValid = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    var leftBottomRow = row + i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    var leftBottomCell = cell - i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (bottomValid &amp;&amp; leftBottomRow &lt; 19 &amp;&amp; leftBottomCell &gt;= 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if (Chess[leftBottomRow, leftBottomCell] == chess)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            score++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            if (score &gt;= 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            bottomValid = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    i++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #endregion 撇方向 ↙↗</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #region 捺方向 ↘↖</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var i = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var score = 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var topValid = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                var bottomValid = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                while (i &lt; 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    var leftTopRow = row - i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    var leftTopCell = cell - i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (topValid &amp;&amp; leftTopRow &gt;= 0 &amp;&amp; leftTopCell &gt;= 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if (Chess[leftTopRow, leftTopCell] == chess)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            score++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            if (score &gt;= 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            topValid = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    var rightBottomRow = row + i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    var rightBottomCell = cell + i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (bottomValid &amp;&amp; rightBottomRow &lt; 19 &amp;&amp; rightBottomCell &lt; 19)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        if (Chess[rightBottomRow, rightBottomCell] == chess)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            score++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            if (score &gt;= 5)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            bottomValid = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    i++;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            #endregion 捺方向 ↘↖</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public async void Dispose()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (_hubConnection != null)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                await _hubConnection.StopAsync();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                await _hubConnection.DisposeAsync();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                _hubConnection = null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gobangrazorcs-2">Gobang.razor.cs<a href="#gobangrazorcs-2" class="hash-link" aria-label="Gobang.razor.cs的直接链接" title="Gobang.razor.cs的直接链接">​</a></h3>
<div class="language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;div class=&quot;chess&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @for (var i = 0; i &lt; 19; i++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @for (var j = 0; j &lt; 19; j++)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var _i = i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var _j = j;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div class=&quot;cell&quot; @onclick=&quot;@(async () =&gt; await Playing(_i, _j))&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;span class=&quot;chess@(Chess[i, j])&quot;&gt;&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@code {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Parameter] public int[,] Chess { get; set; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [Parameter]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public EventCallback&lt;(int, int)&gt; OnPlaying { get; set; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private async Task Playing(int row, int cell)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (OnPlaying.HasDelegate)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            await OnPlaying.InvokeAsync((row, cell));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/江南与师姐">江南与师姐</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-04-29T10:42:13.000Z">2024年4月29日</time> · <!-- -->阅读需 10 分钟</div></header><div class="markdown"><blockquote>
<p>江南依旧是 我喜欢的作家,如果这段文字触动了你，你可以去看看他的作品</p>
</blockquote>
<p>以下是江南所写</p>
<p>我跟Celina的关系绝说不上亲近，基本是个闲人，但是某个下午Celina出现在我的实验室里，那时候我正跟某种极臭的气体战斗，像只戴着眼镜的臭鼬—-我们做实验都得戴防护限镜。</p>
<p>Celina问我说你晚上有空么？我说有啊师姐有饭局么？我少年时代基本就这点出息....</p>
<p>Celina说有，但你得穿像样点儿，我说我有新买的牛仔裤，Celina说穿牛仔裤去吃法国菜会被人赶出来，我说呦呵吃法国菜？Celina说走我带你去买身西装。</p>
<p>西装倒是不贵，几百美金就拿下了，但是皮鞋贵，皮鞋也几百美金，我有点胆怯了，心说师姐这是要泡我？要泡我直说啊！不用那么委婉？我能上校网发帖求点贤么....开玩笑的，那时候还没点赞这个功能，我就是心惊胆战。</p>
<p>Celina拍拍我肩膀上的皱褶，说一会儿坐我旁边少说话，多吃东西，今晚上有牡砺。</p>
<p>我于是坐在一问题为豪华的餐厅里，吃着牡蛎，听Celina和她的哈佛男友谈分手_...我的耳朵竖得很直，务必把这场惊天大八卦的每个细节都听进去。</p>
<p>哈佛男友真是金光闪闪，牛逼大了，在我土狗的岁月里我看到这等男人真是心生白卑，导致于我后来非常舍得在衣服上花钱，所有西装都是定制，还强行要投资我家裁缝楼下的酒廊.以便在</p>
<p>心里农奴翻身做主人扬眉吐气….</p>
<p>俩人谈分手的同时也在谈结婚，电视割的感觉，男友的主张是他在国内找到了一份非常好的工作，Celina应该立刻跟他回国，如果Celina不愿意回国也不要紧，他们结个婚就好，他觉得自己回了国，女朋友在美国很不安全。</p>
<p>这倒也非常霸道总裁，我喜欢...可是霸道总不是要娶我而是要娶Celina， Celina不喜欢，</p>
<p>Celina 说我嫁给你当家庭主妇？我也是辛辛苦苦考到美国来的，我不读书了跟你回国？你当我是你的保姆？</p>
<p>精英说那结婚！我们在一起那么久了我们结婚不就好了？Celina说你那只眼睛看我觉得我非你不嫁？</p>
<p>男友说你们建筑那行就是画图画到死，女人怎么做？我跟你说国内有很多机会，你听我的没错，</p>
<p>Celina.说....</p>
<p>然后他们就决定要分手，然后就开始谈钱的问题，我这才知道Celina可以读我们学校那个很贵很贵且没什么奖学金的建筑系是因为男朋友慷慨出资，而男朋友也不是自己有线，而是家里觉得Celina早晚是自家的儿媳妇所以慷慨出资.....</p>
<p>最后Celina说没问题我把学费还给你，但我现在没有那笔钱，给我一年时间我分期给你</p>
<p>男朋友当时说了句把我惊呆了的话说，年利息按照定期算我也不多要你的。</p>
<p>Celina说可以！男朋友终于失去平静大声说你知道我为什么问你要利息么？他指着我说因为你今带了这个小子来跟我讲道！你不带他来我一分利息不要你的还暂缓你一年还那笔钱！</p>
<p>我说大哥你不要乱枪扫射老子他妈的就是来帮忙开车的！</p>
<p>男朋友不屑地了我一眼，大概也丝毫没觉得我有资格成为他的竞争者，说，我知道你们这种人有很多。</p>
<p>总之就是这么不欢而数了，Celina开着她的尼桑跑车送我回我的公寓，</p>
<p>非常礼貌地说今天辛苦你了，他那个人有时候发起脾气来不受控制我不敢单独见他了，我说你是很难过吧，难过了别强撑，我们可以组局吃饭一起骂那个傻逼。</p>
<p>Celina笑笑说其实我以前.很喜欢他的。</p>
<p>那之后Celina的生活一下子就变得拮据了，她打着好几份工包括黑工来支付自己的学费，好在最终男朋友还是坚持把那辆尼桑跑车送给了她，说那是礼物而不是需要偿还的东西，Celina 卖了跑车，买了辆二手小丰田继续开着。</p>
<p>她仍旧是那么闪闪发亮，只有很少数的人知道她的辛苦，她渐渐地形容憔悴但依然微笑，用化妆来掩盖自己的黑眼圈，更多地出现在运动场而不是练习跳舞，她说她得保持运动否则就会倒下。</p>
<p>最辛苦的时候她问我借过钱说一个月就还，我尽我的能力给了她一张3000美元的支票，到期的时候她还了我一张3100美元的纸片说能否过一周再去兑？我就知道那时候她的户头里没有钱，还要一周</p>
<p>我把那张支票拿了个图钉钉在我办公桌对面的墙上，过了三个月才去兑的。</p>
<p>我说谢谢你送我西装和皮鞋</p>
<p>Celina说那是你的武装，就像女孩子用化妆来武装一样，你以后会有更好的武装。</p>
<p>再后来Celina毕业回国当了设计师，跟前男友结婚了，精英男一直等她，那应该是个蛮好的人，</p>
<p>也是配得上Celina的人，只是太自我。想必如今他再也不敢跟Celina那样说话了，</p>
<p>因为Celina无求于他，只是爱他而已。</p>
<p>读到这你大概了解了江南小说里的男女主角</p>
<p>学姐说精英有时候会发疯，她一个人不敢去，所以带上了江南。</p>
<p>如果当时提出要分手，要还钱的时候江南猛的拍案而起直面精英男会怎样呢？</p>
<p>那个晚上是江南最后悔的夜晚了吧？</p>
<p>大概现在江南也会在漫长的黑夜里幻想当时的场景</p>
<p>江南拍桌而起，破口大骂</p>
<p>“要分手就分，你滚了还有我杨志!“</p>
<p>“我也爱师姐，我能照顾的比你好!”</p>
<p>“不就是还钱吗？老子帮师姐还!谁稀罕你的臭钱!”</p>
<p>精英男气的浑身发抖，直勾勾的看着江南，大概是被突如其来的进攻打乱阵脚</p>
<p>“看什么看?不服咱俩出去solo!”</p>
<p>江南脸上青筋暴起，戴着眼镜也打挡不住他怒目圆睁的双眼，他抬起头和高他半扎的精 英男对视</p>
<p>眼里有火要喷出来</p>
<p>这时候的师姐跟龙族四看见路明非为自己挡住昆古尼尔一样震惊和呆滞</p>
<p>江南一脚踹的精英男飞出三米远</p>
<p>右手环抱着师姐的肩膀带她坐上藏在黑暗里的尼桑跑车</p>
<p>油门到底，汽车咆哮</p>
<p>江南驾驶着跑车在黑夜里穿梭</p>
<p>师姐Celina看着眼前突然发疯的男孩</p>
<p>耳朵里只剩下自己的心跳和引擎的轰鸣……</p>
<p>楚子航的悔恨就来自于此吧？</p>
<p>可惜吗？可惜现在已经功成名就的江南，可惜现在已经手握刀剑的杨志</p>
<p>再也没有那样的机会，</p>
<p>因为世界上最快的跑车也跑不赢时光</p>
<hr>
<blockquote>
<p>没有如果，只有自卑，怯懦的江南，路明非，亦或是我</p>
</blockquote></div></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/welcome">Welcome</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-08-26T00:00:00.000Z">2021年8月26日</time> · <!-- -->阅读需 1 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://sebastienlorber.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/slorber.png" alt="Sébastien Lorber"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://sebastienlorber.com" target="_blank" rel="noopener noreferrer"><span>Sébastien Lorber</span></a></div><small class="avatar__subtitle">Docusaurus maintainer</small></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/yangshun" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/yangshun.png" alt="Yangshun Tay"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/yangshun" target="_blank" rel="noopener noreferrer"><span>Yangshun Tay</span></a></div><small class="avatar__subtitle">Front End Engineer @ Facebook</small></div></div></div></div></header><div class="markdown"><p><a href="https://docusaurus.io/docs/blog" target="_blank" rel="noopener noreferrer">Docusaurus blogging features</a> are powered by the <a href="https://docusaurus.io/docs/api/plugins/@docusaurus/plugin-content-blog" target="_blank" rel="noopener noreferrer">blog plugin</a>.</p>
<p>Simply add Markdown files (or folders) to the <code>blog</code> directory.</p>
<p>Regular blog authors can be added to <code>authors.yml</code>.</p>
<p>The blog post date can be extracted from filenames, such as:</p>
<ul>
<li><code>2019-05-30-welcome.md</code></li>
<li><code>2019-05-30-welcome/index.md</code></li>
</ul>
<p>A blog post folder can be convenient to co-locate blog post images:</p>
<p><img decoding="async" loading="lazy" alt="Docusaurus Plushie" src="/assets/images/docusaurus-plushie-banner-a60f7593abca1e3eef26a9afa244e4fb.jpeg" width="1500" height="500" class="img_ev3q"></p>
<p>The blog supports tags as well!</p>
<p><strong>And if you don&#x27;t want a blog</strong>: just delete this directory, and use <code>blog: false</code> in your Docusaurus config.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/facebook">facebook</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/hello">hello</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/docusaurus">docusaurus</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/mdx-blog-post">MDX Blog Post</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-08-01T00:00:00.000Z">2021年8月1日</time> · <!-- -->阅读需 1 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://sebastienlorber.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/slorber.png" alt="Sébastien Lorber"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://sebastienlorber.com" target="_blank" rel="noopener noreferrer"><span>Sébastien Lorber</span></a></div><small class="avatar__subtitle">Docusaurus maintainer</small></div></div></div></div></header><div class="markdown"><p>Blog posts support <a href="https://docusaurus.io/docs/markdown-features" target="_blank" rel="noopener noreferrer">Docusaurus Markdown features</a>, such as <a href="https://mdxjs.com/" target="_blank" rel="noopener noreferrer">MDX</a>.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>提示</div><div class="admonitionContent_BuS1"><p>Use the power of React to create interactive blog posts.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;button clicked!&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">Click</span><span class="token plain"> me</span><span class="token operator" style="color:#393A34">!</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><button>Click me!</button></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/docusaurus">docusaurus</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/long-blog-post">Long Blog Post</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2019-05-29T00:00:00.000Z">2019年5月29日</time> · <!-- -->阅读需 3 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/endiliey" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/endiliey.png" alt="Endilie Yacop Sucipto"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/endiliey" target="_blank" rel="noopener noreferrer"><span>Endilie Yacop Sucipto</span></a></div><small class="avatar__subtitle">Maintainer of Docusaurus</small></div></div></div></div></header><div class="markdown"><p>This is the summary of a very long blog post,</p>
<p>Use a <code>&lt;!--</code> <code>truncate</code> <code>--&gt;</code> comment to limit blog post size in the list view.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/hello">hello</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/docusaurus">docusaurus</a></li></ul></div><div class="col text--right col--3"><a aria-label="阅读 Long Blog Post 的全文" href="/blog/long-blog-post"><b>阅读更多</b></a></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/first-blog-post">First Blog Post</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2019-05-28T00:00:00.000Z">2019年5月28日</time> · <!-- -->阅读需 1 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/wgao19" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/wgao19.png" alt="Gao Wei"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/wgao19" target="_blank" rel="noopener noreferrer"><span>Gao Wei</span></a></div><small class="avatar__subtitle">Docusaurus Core Team</small></div></div></div></div></header><div class="markdown"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/hola">hola</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/docusaurus">docusaurus</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="博文列表分页导航"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 子非鱼, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>